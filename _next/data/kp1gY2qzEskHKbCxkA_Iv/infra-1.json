{"pageProps":{"postData":{"id":"infra-1","title":"ubuntu 18.04에 Docker 설치하기","category":null,"thumbnail":"https://www.docker.com/wp-content/uploads/2021/09/Docker-build.png","tags":"infra","date":"2022-12-03 10:00","preview":"\n프로젝트를 진행하면서 도커 허브에 올라가있는 이미지를 가져와서 배포 환경에서 실행해야 하는 요구사항이 발생하였습니다. \n\n이를 위해서 ubuntu환경에 docker를 설치했던 과정을 공유해보겠습니다.\n\n## Docker가 지원하는 OS\n\n다음은 do"},"detail":"\n프로젝트를 진행하면서 도커 허브에 올라가있는 이미지를 가져와서 배포 환경에서 실행해야 하는 요구사항이 발생하였습니다. \n\n이를 위해서 ubuntu환경에 docker를 설치했던 과정을 공유해보겠습니다.\n\n## Docker가 지원하는 OS\n\n다음은 docker 공식 문서에서 지원하는 OS입니다.\n\n저는 `ubuntu 18.04` 환경에서 진행하였습니다.\n\n- Ubuntu Impish 21.10\n- Ubuntu Hirsute 21.04\n- Ubuntu Focal 20.04 (LTS)\n- Ubuntu Bionic 18.04 (LTS)\n\n## 설치 과정\n\n- 기본 패키지들이 최신 버전인지 확인하고 갱신\n    - `$ sudo apt-get update`\n- apt가 HTTPS를 통해 repository를 이용하는 것을 허용할 수 있도록 해주는 패키지들을 설치\n    \n    ```bash\n    $ sudo apt-get install \\\n    \tca-certificates \\\n    \tcurl \\\n    \tgnupg \\\n    \tlsb-release\n    ```\n    \n- Docker 공식 GPG key 추가\n    - `$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg`\n    - 만약 아래와 같은 경고가 발생한다면 (1), (2) 과정을 순서대로 수행해 줍니다.\n        - `gpg: WARNING: unsafe ownership on homedir '/home/vlastimil/.gnupg'`\n    - (1) `sudo gpgconf --kill dirmngr`\n    - (2) `sudo chown -R $USER ~/.gnupg`\n- Docker repository 등록\n    \n    ```bash\n    $ echo \\\n    \t\"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] [https://download.docker.com/linux/ubuntu](https://download.docker.com/linux/ubuntu) \\\n    \t$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n    ```\n    \n- Docker 설치\n    - `$ sudo apt-get update`\n    - `$ sudo apt-get install docker-ce docker-ce-cli [containerd.i](http://containerd.io/)o`\n- Docker가 재대로 설치되었는지 확인\n    - `$ sudo docker version`\n\n## Ubuntu 환경에서 sudo 권한 없이 docker 명령어 사용하기\n\n배포 스크립트를 통해서 도커 관련 명령어가 실행되게 하기 위해서는 다음 명령어가 필요합니다.\n\n- `$ sudo usermod -aG docker $USER`\n    - usermod : 사용자 속성을 변경하는 명령어\n    - G (—groups) : 새로운 그룹을 말한다.\n    - a (—append) : 다른 그룹에서 삭제 없이 G 옵션에 따른 그룹에 사용자를 추가한다.\n    - $USER : 현재 사용자를 가리키는 환경변수\n    - 실행 후 우분투를 재기동해야 함.\n\n---\n\n**참고 자료** 📚\n\n- [Install Docker Engine on Ubuntu](https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository)\n\n- [gpg: WARNING: unsafe ownership on homedir '/home/user/.gnupg'](https://unix.stackexchange.com/questions/452020/gpg-warning-unsafe-ownership-on-homedir-home-user-gnupg)\n"},"__N_SSG":true}